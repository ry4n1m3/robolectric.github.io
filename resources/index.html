<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Robolectric</title>
    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-19269905-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
    <link href="../stylesheets/application-5ae8d8e4.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="../javascripts/application-da39a3ee.js" type="text/javascript"></script>
</head>

<body>
    <div id="page" class="container">
        <div class="row">
            <div id="sidebar" class="col-md-3">
                <a href="/"><img class="logo" src="../images/robolectric-7fb6698b.png" /></a>
<ul class="nav nav-stacked">
    <li class="nav-header"><a href="/getting_started/">Getting Started</a></li>
    <li class="nav-item"><a href="/eclipse-quick-start/">Eclipse</a></li>
    <li class="nav-item"><a href="/download/">Download Jars</a></li>
</ul>

<ul class="nav nav-stacked">
    <li class="nav-header"><a href="/user-guide/">User Guide</a>
    <li class="nav-item"><a href="/activity-lifecycle/">Driving the Activity Lifecycle</a></li>
    <li class="nav-item"><a href="/apklibs/">Working with ApkLibs</a></li>
</ul>

<ul class="nav nav-stacked">
    <li class="nav-header"><a href="/extending/">Extending</a></li>
    <li class="nav-item"><a href="/customizing/">Test Runner</a></li>
    <li class="nav-item"><a href="/roboguice/">RoboGuice (Part 1)</a></li>
    <li class="nav-item"><a href="/roboguice2/">RoboGuice (Part 2)</a></li>
</ul>

<ul class="nav nav-stacked">
    <li class="nav-header"><a href="/contributor-guidelines/">Contributing</a></li>
    <li class="nav-item"><a href="/android-jars/">Real Android Jars</a></li>
</ul>

<ul class="nav nav-stacked">
    <li class="nav-header"><a href="/resources/">Resources</a></li>
    <li class="nav-item"><a href="/javadoc/?overview-summary.html">JavaDoc</a></li>
    <li class="nav-item"><a href="/release-notes/">Release Notes</a></li>

    <li class="nav-item"><a href="http://robolectric.blogspot.com">Blog</a></li>
    <li class="nav-item"><a href="http://groups.google.com/group/robolectric">Google Group</a></li>
</ul>
            </div>
            <div id="content" class="col-md-9">
                <h2>Who&rsquo;s Using Robolectric?</h2>

<ul>
<li><a title="Pivotal Labs: Home" href="http://pivotallabs.com/">Pivotal Labs</a></li>
<li><a href="https://squareup.com/">Square</a></li>
<li><a title="Path" href="http://www.path.com/">Path</a></li>
<li><a title="Zoodles: A safe Kid Mode&amp;#153; for every device" href="http://www.zoodles.com/home/marketing">Zoodles</a></li>
<li><a href="https://market.android.com/details?id=com.soundcloud.android">SoundCloud</a></li>
<li><a title="Found &amp;ndash; See where your friends are going." href="http://beta.getfoundapp.com/">Found</a></li>
<li><a title="Frogtek" href="http://frogtek.org/">Frogtek</a></li>
<li><a title="NASA Trained Monkeys" href="http://www.nasatrainedmonkeys.com/">NASA Trained Monkeys</a></li>
<li><a title="Zauber | Software Development Outsourcing" href="http://www.zaubersoftware.com/en/home/">Zauber</a></li>
<li><a title="roboguice - Google Guice on Android - Google Project Hosting" href="http://code.google.com/p/roboguice/">RoboGuice</a></li>
<li><a title="android-in-practice -Source code and demo apps for the Manning book &amp;quot;Android in Practice&amp;quot; - Google Project Hosting" href="http://code.google.com/p/android-in-practice/">Android in Practice</a></li>
<li><a title="Mobile App Development | Blackberry Apps| iPhone Apps | Xtreme Labs Inc." href="http://www.xtremelabs.com/">Xtreme Labs Inc.</a></li>
<li><a href="https://github.com/robolectric/RobolectricSample">Robolectric Sample</a></li>
<li><a href="https://github.com/pivotal/AndroidIntelliJStarter">Android IntelliJ Starter</a></li>
</ul>

<h2>Presentation: TDD Android Applications with Robolectric</h2>

<p>Pivotal Labs developers have given this presentation several times.</p>

<div style="width:425px" id="__ss_8857513"><strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/joemoore1/tdd-android-applications-with-robolectric" title="TDD Android Applications with Robolectric">TDD Android Applications with Robolectric</a></strong><object id="__sse8857513" width="425" height="355"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=tddandroidwithrobolectric-110815140800-phpapp01&amp;stripped_title=tdd-android-applications-with-robolectric&amp;userName=joemoore1" /><param name="allowFullScreen" value="true"/><param name="allowScriptAccess" value="always"/><embed name="__sse8857513" src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=tddandroidwithrobolectric-110815140800-phpapp01&amp;stripped_title=tdd-android-applications-with-robolectric&amp;userName=joemoore1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="355"></embed></object><div style="padding:5px 0 12px">View more <a href="http://www.slideshare.net/">presentations</a> from <a href="http://www.slideshare.net/joemoore1">Joseph Moore</a>.</div></div>

<hr>

<h2>Troubleshooting</h2>

<h3>java.lang.RuntimeException: Stub!</h3>

<ul>
<li>Make sure you&rsquo;ve put <code>@RunWith(RobolectricTestRunner.class)</code> at the top of your test class.</li>
<li>Make sure that robolectric and its dependencies (including JUnit) appear before the Android API jars in the classpath.</li>
</ul>

<hr>

<h3>Could not resolve dependencies for project: Could not find artifact com.google.android.maps:maps:jar:18_r3 in central (<a href="http://repo1.maven.org/maven2">http://repo1.maven.org/maven2</a>)</h3>

<p>The jerk lawyers at Google won&rsquo;t allow the Google maps add-on library stubs to be uploaded to Maven Central. You need to manually install them yourself.</p>

<p>Make sure you&rsquo;ve got the Android Google SDK listed <a href="https://github.com/robolectric/robolectric/blob/master/pom.xml#L95">here</a> (look for <code>com.google.android.maps</code>; currently it&rsquo;s <code>18_r3</code>) downloaded, then do this:</p>
<pre class="highlight plaintext">./script/install-maps-jar.sh
</pre>
<p>Or, just make sure you have the latest Google Maps API jar and do this:</p>
<pre class="highlight plaintext">cd $ANDROID_HOME
ls -1d add-ons/addon-google_apis-google-* | sort | tail -1 |
    xargs -I% mvn install:install-file -DgroupId=com.google.android.maps -DartifactId=maps -Dversion=16_r3 -Dpackaging=jar -Dfile=%/libs/maps.jar
</pre>
<hr>

<h3>Unable to find Android SDK</h3>

<blockquote>
<p><strong>NOTE: this problem no longer happens in Robolectric 2.0. You oughta upgrade!</strong>
Robolectric cannot find your Android SDK. You can tell Robolectric how to find your SDK root in several ways:</p>
</blockquote>

<h5><code>local.properties</code> file</h5>

<p>Set the <code>sdk.dir</code> in a <code>local.properties</code> file by running the following in your project&rsquo;s root dir:</p>
<pre class="highlight plaintext">$ android update project -p .
</pre>
<p>Setting up a <code>local.properties</code> file is a solution that will work for most IDEs since you don&rsquo;t need to worry about getting environment variables passed around.</p>

<h5><code>ANDROID_HOME</code> environment variable</h5>

<p>Set <code>ANDROID_HOME</code> environment variable. You can put this in your <code>.bash_profile</code> for example. You may need to do some <a href="http://www.dowdandassociates.com/content/howto-set-environment-variable-mac-os-x-etclaunchdconf">extra work</a> to get your IDE to pick it up.</p>
<pre class="highlight plaintext">export ANDROID_HOME=/path/to/android/sdk
</pre>
<h5><code>android.sdk.path</code> system property</h5>

<p>Set the Java system property <code>android.sdk.path</code>, e.g. by putting <code>-Dandroid.sdk.path=/path/to/android/sdk</code> on the command line.</p>

<h5><code>which android</code></h5>

<p>As a last resort, Robolectric will try running <code>which android</code> to find the executable on your path. Add the SDK tools to your path:</p>
<pre class="highlight plaintext">PATH=/path/to/android/sdk/tools:$PATH
</pre>
<h3>Type com.google.android.maps.MapView not present</h3>

<div class="stacktrace">java.lang.TypeNotPresentException: Typecom.google.android.maps.MapView not present
       at org.robolectric.Robolectric.bindShadowClass(Robolectric.java:67)
Caused by: java.lang.ClassNotFoundException: caught an exception while obtaining a class file for com.google.android.maps.MapView
&hellip;
</div>

<ol>
<li>Make sure you have the Google Maps API jar in your build path.</li>
<li>Even if you&rsquo;re building against an earlier version of the API, link Robolectric to version 7 or higher.</li>
</ol>

            </div>
        </div>
    </div>
</body>
</html>